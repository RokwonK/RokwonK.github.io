---
title: "[λ„¤νΈμ›ν¬] HTTPSμ λ™μ‘μ›λ¦¬"
categories: CS
tags:
  - network
---  

κΈ°μ΅΄ HTTP λ°©μ‹μ€ μ „μ†΅ μ¤‘ λ°μ΄ν„°λ¥Ό κ°€λ΅μ±λ‹¤λ©΄ λ„κµ¬λ‚ λ°μ΄ν„°λ¥Ό μ½μ„ μ μλ‹¤. μ¦‰, λ°μ΄ν„°κ°€ μ•”νΈν™”λμ§€ μ•μ€ μƒνƒλ΅ μΈν„°λ„·μƒμ—μ„ λμ•„λ‹¤λ‹λ‹¤λ” κ²ƒμ΄λ‹¤. μ΄λ¬ν• λ³΄μ•λ¬Έμ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ **ν†µμ‹ λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•μ—¬ μ•μ „ν•κ² λ°μ΄ν„°λ¥Ό ν†µμ‹ ν•λ” λ°©λ²•μ΄ HTTPS**μ΄λ‹¤. HTTPSλ¥Ό μ‚¬μ©ν•λ©΄ μ¤‘κ°„μ κ³µκ²©, λ°μ΄ν„° λ³€μ΅°μ™€ κ°™μ€ μ„ν‘μ—μ„λ„ λ³΄νΈλ°›μ„ μ μλ‹¤.  


## λ€μΉ­ν‚¤(λΉ„λ°€ν‚¤)μ™€ λΉ„λ€μΉ­ν‚¤(κ³µκ°ν‚¤)
HTTPSλ¥Ό μ΄μ©ν• ν†µμ‹ μ€ TCP μ—°κ²°, SSL handshake, λ°μ΄ν„°ν†µμ‹  μ„Έλ‹¨κ³„λ΅ κµ¬μ„±λμ–΄ μλ‹¤. μ΄μ¤‘ **SSL handshake λ‹¨κ³„μ—μ„λ” κ³µκ°ν‚¤ λ°©μ‹μ„ μ΄μ©**ν•κ³  μ΄ν›„ **λ°μ΄ν„°ν†µμ‹ μ—μ„λ” λ€μΉ­ν‚¤ λ°©μ‹μ„ μ΄μ©**ν•λ‹¤.  

**π’΅ λ€μΉ­ν‚¤(λΉ„λ°€ν‚¤ μ•”νΈν™” λ°©μ‹)**  
**ν•λ‚μ ν‚¤λ΅ μ•”νΈν™”ν•κ³  λ³µνΈν™”ν•λ” λ°©μ‹**μ΄λ‹¤. μ΄ λ°©μ‹μ€ κ³Όμ •μ΄ κ°„λ‹¨ν•λ©° λΉ λ¥΄μ§€λ§ ν‚¤λ¥Ό λ¶„μ‹¤ν•κ±°λ‚ νƒμ·¨λ‹Ήν•λ‹¤λ©΄ λ³µνΈν™”κ°€ μ‰½λ‹¤λ” μΉλ…μ μΈ λ‹¨μ μ΄ μλ‹¤.
{: .notice--info}

**π’΅ λΉ„λ€μΉ­ν‚¤(=κ³µκ°ν‚¤ μ•”νΈν™” λ°©μ‹)**  
λΉ„λ€μΉ­ν‚¤λ” **κ³µκ°ν‚¤μ™€ κ°μΈν‚¤λ΅ λ‚λ„μ–΄μ Έ μλ‹¤. κ³µκ°ν‚¤λ΅ μ•”νΈν™”ν•λ‹¤λ©΄ κ°μΈν‚¤λ΅ λ³µνΈν™”κ°€ κ°€λ¥ν•λ©° κ·Έ μ—­λ„ μ„±λ¦½**ν•λ‹¤. κ³µκ°ν‚¤λ” μ™Έλ¶€μ—μ„ μ‚¬μ©ν•  μ μμ§€λ§ κ°μΈν‚¤λ” μ„λ²„μ—μ„ μ†μ ν•¨μΌλ΅μ¨ λ³΄μ•μ„ κ°•ν™”ν•λ‹¤. κ³µκ°ν‚¤ λ°©μ‹μ€ λ€μΉ­ν‚¤λ³΄λ‹¤ λ” μ•μ „ν•μ§€λ§ κ³„μ‚° κ³Όμ •μ΄ λ³µμ΅ν•κ³  μ—°μ‚° λ„μ¤‘ μ»΄ν“¨ν„°μ μμ›μ΄ λ§μ΄ μ‚¬μ©λλ” λ‹¨μ μ΄ μμ–΄ λ€μΉ­ν‚¤μ™€ μ μ ν νΌν•©ν•μ—¬ μ‚¬μ©ν•λ‹¤. λΉ„λ€μΉ­ν‚¤λ¥Ό μƒμ„±ν•λ” λ°©μ‹μΌλ΅ RSA μ•κ³ λ¦¬μ¦μ΄ μλ‹¤.  
{: .notice--info}  

<br />  

## SSL/TLS  
SSL(Secure Socket Layer)μ™€ TLS(Transport Layer Security Protocol)μ€ **μΈν„°λ„· ν†µμ‹ μ— μ•μ „ν• κ³„μΈµμ„ μ¶”κ°€ν•λ” λ°©μ‹μΌλ΅ μ΄ κΈ°μ μ„ κµ¬ν„ν•κΈ° μ„ν•΄ μ΅΄μ¬ν•λ” κ²ƒμ΄ SSL/TLS μΈμ¦μ„**μ΄λ‹¤. TLSκ°€ SSLλ³΄λ‹¤ μµμ‹ λ²„μ „μ΄μ§€λ§ TLS, SSL, SSL/TLS λ“± κ°μκ°€ νΈν• μ΄λ¦„μΌλ΅ λ§μ΄ λ¶€λ¥Έλ‹¤.  

<br />  

## CA(Certificate Authority)
**CAλ” μΈμ¦μ„λ¥Ό λ°κΈ‰ν•΄μ£Όλ” μΈμ¦κΈ°κ΄€**μ΄λ‹¤. μ‚¬μ΄νΈμ μ •λ³΄μ™€ μ‚¬μ΄νΈμ κ³µκ°ν‚¤λ¥Ό μ κ³µν•λ©΄ μΈμ¦κΈ°κ΄€μ—μ„λ” CA κ°μΈν‚¤λ¥Ό μ΄μ©ν•΄ μ•”νΈν™”ν•μ—¬ μ‚¬μ΄νΈ μΈμ¦μ„λ¥Ό λ°κΈ‰ν•΄μ¤€λ‹¤. λ°κΈ‰ν• μΈμ¦μ„λ¥Ό μ‚¬μ©ν•λ” ν΄λΌμ΄μ–ΈνΈμ—μ„λ” ν•΄λ‹Ή CAμ κ³µκ°ν‚¤λ¥Ό μ΄μ©ν•΄μ„ λ³µνΈν™”ν•  μ μλ‹¤.  

**π’΅ Root CA**  
CAμ κ³µκ°ν‚¤κ°€ μΈμ¦λ κ²ƒμΈμ§€ μ–΄λ–»κ² μ• μ μμ„κΉ? CAμ κ³µκ°ν‚¤μ— λ€ν• μΈμ¦μ„λ¥Ό λ°κΈ‰ν•΄μ£Όλ” μƒμ„ μΈμ¦κΈ°κ΄€μ΄ μ΅΄μ¬ν•λ‹¤. μ΄ μƒμ„ μΈμ¦κΈ°κ΄€μ μ°¨μƒμ„ κ³„μΈµλ„ μ΅΄μ¬ν•λ©° κ·Έλ ‡κ² μµμƒλ‹¨μ—λ” Root CAκ°€ μ΅΄μ¬ν•λ‹¤. μ΄ Root CAμ—μ„λ” μμ‹ μ κ³µκ°ν‚¤μ— λ€ν• μΈμ¦μ„λ¥Ό μ¤μ¤λ΅ λ°κΈ‰ν•λ‹¤.  
{: .notice--info}

<br />  

## SSL Handshake
SSH Handshakeμ λ©ν‘λ” **λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•λ” μ‹¤μ§μ μΈ ν‚¤μΈ λ€μΉ­ν‚¤(PSK)λ¥Ό μ„λ²„μ™€ κ³µμ ν•λ” κ²ƒ**μ΄λ‹¤. μ΄λ¥Ό μ„ν•΄μ„ κ³µκ°ν‚¤(RSA, ECDHE λ°©μ‹μΌλ΅ μƒμ„±)λ¥Ό μ΄μ©ν•μ—¬ ν‚¤ κµν™(λ””ν”Ό-ν—¬λ§ μ•κ³ λ¦¬μ¦)ν•μ—¬ λ€μΉ­ν‚¤(PSK)λ¥Ό μ•μ „ν•κ² κ³µμ ν•λ‹¤. SSL Handshake κ³Όμ •μ„ μμ„λ€λ΅ μ•μ•„λ³΄μ.

### μ„λ²„μ SSL μΈμ¦μ„ λ°κΈ‰κ³Όμ •
1. **μ„λ²„μ—μ„ μΈμ¦ μ„λ… μ”μ²­μ„(CSR, Certificate Signing Request) μƒμ„±**
  - μ„λ²„μ—μ„ κ³µκ°/κ°μΈν‚¤λ¥Ό μƒμ„±
  - κ³µκ°ν‚¤μ™€ μ„λ²„ μ •λ³΄λ¥Ό CAμ— μ „λ‹¬
2. **CAμ—μ„ SSL μΈμ¦μ„λ¥Ό λ°κΈ‰**
  - μ„λ²„μ μ •λ³΄μ™€ κ³µκ°ν‚¤λ¥Ό CAμ κ°μΈν‚¤λ¥Ό μ΄μ©ν•΄ μ•”νΈν™”ν•μ—¬ SSL μΈμ¦μ„λ¥Ό λ§λ“ λ‹¤.
3. **μ„λ²„μ—μ„ SSL μΈμ¦μ„λ¥Ό λ°›λ”λ‹¤.**  

<br />  

### SSL Handshake  
TCP μ—°κ²°μ΄ν›„ SSL Handshakeλ¥Ό ν†µν•΄ λ³΄μ• μ„Έμ…μ„ λ§λ“ λ‹¤.
1. **Client -> Server**
  - `ClientHello`  
  Cipher Suite λ©λ΅, SSL ν”„λ΅ν† μ½ λ²„μ „, Random Byte λ“±μ„ ν•¨κ»λ³΄λ‚Έλ‹¤.
2. **Server -> Client**
  - `ServerHello`  
  λ°›μ€ Cipher Suite μ¤‘ ν•λ‚λ¥Ό μ„ νƒν•κ³  μ‘λ‹µν•΄μ¤€λ‹¤.(with  SSL ν”„λ΅ν† μ½ λ²„μ „)
  - `Certificate`  
  μ„λ²„μ SSL μΈμ¦μ„λ¥Ό λ³΄λ‚Έλ‹¤.
  - `(Server Key Exchange)`  
  (μ–΄λ–¤ ν‚¤ κµν™ λ©”μ»¤λ‹μ¦μ„ μ‚¬μ©ν•λλƒμ— λ”°λΌ μƒλµλ  μλ„ μμ) SSL μΈμ¦μ„ λ‚΄λ¶€μ— μ„λ²„μ κ³µκ°ν‚¤κ°€ μ—†λ” κ²½μ°, **λ€μΉ­ν‚¤λ¥Ό λ§λ“λ”λ° μ‚¬μ©ν•  μ¬λ£λ¥Ό λ³΄λ‚Έλ‹¤.**{: .font-highlight}
  - `ServerHelloDone`  
  μ„λ²„μ ν–‰λ™μΆ…λ£λ¥Ό μ•λ¦Ό
3. **Client -> Server**
  - `Certificate`  
  CAμ κ³µκ°ν‚¤λ¥Ό μ΄μ©ν•΄ μ„λ²„ **SSL μΈμ¦μ„λ¥Ό λ³µνΈν™”**{: .font-highlight}ν•λ©° μ ν¨μ„±μ„ κ²€μ¦ν•λ‹¤.
  - `Client Key Exchange`  
  μ–΄λ–¤ ν‚¤ κµν™ λ©”μ»¤λ‹μ¦μ„ μ‚¬μ©ν•λλƒμ— λ”°λΌ μ·¨ν•λ” ν–‰λ™μ΄ λ‹¬λΌμ§„λ‹¤. λ³µνΈν™”ν™ SSL μΈμ¦μ„ λ‚΄λ¶€μ— μ„λ²„ κ³µκ°ν‚¤κ°€ μλ” κ²½μ° ν΄λΌμ΄μ–ΈνΈμ—μ„ λ€μΉ­ν‚¤λ¥Ό μƒμ„±ν•κ³  μ„λ²„ κ³µκ°ν‚¤λ¥Ό μ΄μ©ν•΄ μ•”νΈν™”ν•μ—¬ μ„λ²„λ΅ λ³΄λ‚Έλ‹¤.  
  μ„λ²„μ κ³µκ°ν‚¤κ°€ μ—†λ” κ²½μ°, λ°μ΄ν„°ν†µμ‹ μ„ μ•”νΈν™”ν•λ”λ° μ‚¬μ©ν•  λ€μΉ­ν‚¤λ¥Ό μƒμ„±ν•κΈ° μ„ν• μ¬λ£λ¥Ό λ§λ“¤μ–΄ λ³΄λ‚Έλ‹¤.  
5. **μΆ…λ£**
  - `ChangeCipherSpec, Finished`  
  μ„λ΅κ°€ ν•„μ”ν• μ •λ³΄λ¥Ό λ¨λ‘ κµν™ν•μ€μΌλ―€λ΅ ν†µμ‹  μ¤€λΉ„ μ™„λ£ ν¨ν‚·μ„ λ³΄λ‚΄κ³  Handshakeλ¥Ό μΆ…λ£ν•κ² λλ‹¤.

<br />  

### ν‚¤ κµν™ λ§¤μ»¤λ‹μ¦
**ν‚¤ κµν™ λ©”μ»¤λ‹μ¦μ€ λΉ„λ°€ν‚¤λ¥Ό μ•μ „ν•κ² κ³µμ ν•λ” λ°©μ‹**μ΄λ‹¤. λΉ„λ°€ν‚¤μ κ²½μ° κ³µκ°λ  κ²½μ° λ³΄μ•μ— μΉλ…μ μ΄κΈ° λ•λ¬Έμ— ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ μ΄ λΉ„λ°€ν‚¤λ¥Ό κµν™ν•κΈ° μ„ν•΄ ν‚¤ κµν™ λ§¤μ»¤λ‹μ¦μ„ μ‚¬μ©ν•λ‹¤. λ€ν‘μ μΌλ΅ RSA Key Exchange λ°©μ‹κ³Ό Diffie-Hellman(λ””ν”Ό-ν—¬λ§) λ°©μ‹μ„ μ΄μ©ν• ν‚¤ κµν™ λ°©μ‹μ΄ μ΅΄μ¬ν•λ‹¤. 

**π’΅ RSA Key Exchange**  
κ³µκ°ν‚¤λ¥Ό μ΄μ©ν•΄ λΉ„λ°€ν‚¤λ¥Ό κµν™ν•λ” λ°©μ‹μ΄λ‹¤. μ„λ΅κ°€ κµν™ν• Random byteλ¥Ό μ΄μ©ν•΄ ν΄λΌμ΄μ–ΈνΈμΈ΅μ—μ„ λ§λ“¤μ–΄ μ„λ²„μ κ³µκ°ν‚¤λ΅ μ•”νΈν™”ν•λ’¤ μ†΅μ‹ ν•λ‹¤.  
(μ£Όμ RSA μ•”νΈν™”μ™€ RSA key exchange λ‹¤λ¥Έ κ²ƒ)
{: .notice--info}

**π’΅ Diffie-Hellman Key Exchange**  
ν‚¤ μμ²΄λ¥Ό κµν™ν•λ” κ²ƒμ΄ μ•„λ‹ ν‚¤λ¥Ό λ§λ“¤ μ¬λ£λ¥Ό κµν™ν•λ” λ°©μ‹μ΄λ‹¤. μ„λ΅κ°€ μ„ νƒν• μ¬λ£λ΅ λΉ„λ°€ν‚¤λ¥Ό λ§λ“¤μ–΄λ‚Έλ‹¤. DH, DHE, ECDHE λ“±μ΄ μμΌλ©° ECDHEλ¥Ό κ°€μ¥ λ§μ΄ μ‚¬μ©ν•λ‹¤.
{: .notice--info}  

<br />  

**μ°Έκ³ **
- [[Network] HTTPSμ λ™μ‘λ°©μ‹](https://inuplace.tistory.com/1086)
- [[λ„¤νΈμ›ν¬] TLS & SSL Handshake](https://steady-coding.tistory.com/512)
- [HTTPS λ™μ‘ κ³Όμ • (λ€μΉ­ν‚¤, κ³µκ°ν‚¤, SSL, TLS, CA)](https://jaeseongdev.github.io/development/2021/07/02/HTTPS,SSL,TLS/)
- [HTTPS ν†µμ‹ κ³Όμ • μ‰½κ² μ΄ν•΄ν•κΈ°](https://aws-hyoh.tistory.com/47)
- ChatGPT
